sdocp('server.js.sdoc', 'Thermal server | Spencer Tipping\nLicensed under the terms of the MIT source code license\n\nmontenegro.clone(\'std db.file\')(function () {\n\nMacros.\nThese eliminate some boilerplate later on.\n\n  defsubst[ok[_stuff]]   [qg[res.writeHead(200), res.end(_stuff)]];\n  defsubst[error[_stuff]][qg[res.writeHead(500), res.end(_stuff)]];\n\nPrototype extensions.\n\n  c\n  String.prototype.starts_with(s) = this.indexOf(s) === 0;\n  String.prototype.sanitize()     = this.replace(/^\\/+/, \'\').replace(/\\.+/g, \'.\');\n\nDatabase.\n\n  var db = caterwaul.db.file(\'db\');\n\nClient files.\nThe first thing to do is serve the stuff in client/.\n\n  require(\'http\').createServer(fn[req, res][(require(\'fs\').readFile(req.url.sanitize(), \'ascii\', fn[err, data][err ? error[err.toString()] : ok[data]]),\n                                             when[req.url.starts_with(\'/client\')])]).listen(8080)})();\n');