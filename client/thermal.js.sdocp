sdocp('client//thermal.js.sdoc', 'Thermal page driver | Spencer Tipping\nLicensed under the terms of the MIT source code license\n\n$(caterwaul.clone(\'std seq montenegro.jquery\')(function () {\n\n  Initial body elements.\n  There are two things in the body at first. One is a collection of stories, and the other is a link to create a new story. Because the link may be accompanied by others at some point, I\'m\n  putting it in a toolbar div.\n\n    $(\'body\').append( html<< div[id=\'stories\'], html<< div[id=\'toolbar\']);\n\n  User interface toplevel components.\n  There are a couple of things that need to happen at the toplevel. First, we need to issue a load request for all of the stories that currently exist. Then, we need to install a sensible\n  default behavior for the \'create new story\' link.\n\n    $.getJSON(\'/stories\', fn[stories][$(\'#stories\').append(stories.map(story))]),\n    $(\'#toolbar\').append( html<< a(\'Create story\')[href=\'javascript:void(0)\']/click(fn_[$(\'#stories\').append(story({name: \'new\', comments: []}))])),\n\n  Behaviors.\n  We want the name of a story to be editable. This can be done by replacing it with a text field when it gets clicked on, and then detecting the blur and replacing the original element with\n  new text.\n\n    where*[editable(element) = element.click(fn_[let*[t = $(this), save() = $(this).replaceWith(editable(t.text($(this).val()))), editor = html<< input[value=t.text()]/blur(save).enter(save)]\n                                                 [t.replaceWith(editor), editor.focus().select()]]).addClass(\'editable\'),\n\n  Data models.\n  A story has a name and a bunch of comments. It also has a \'heat value\' computed from its interactions with other stories and the amount of weight put on it by different users. The heat value\n  is computed on the client-side.\n\n           story(json)   = html<< div.story(h1.name(!json.name)%editable, !(comment(x) <sm< json.comments)),\n           comment(json) = html<< div.comment(h1.user(!json.username), p(!json.text))]}));\n');